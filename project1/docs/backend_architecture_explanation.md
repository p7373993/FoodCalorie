# 백엔드 아키텍처 상세 설명

## 🏗️ 전체 시스템 구조

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Frontend      │    │   Backend       │    │   Database      │
│   (Next.js)     │◄──►│   (FastAPI)     │◄──►│   (PostgreSQL)  │
└─────────────────┘    └─────────────────┘    └─────────────────┘
                              │
                              ▼
                       ┌─────────────────┐
                       │   Redis         │
                       │   (Cache)       │
                       └─────────────────┘
```

## 📁 폴더 구조 상세 설명

### 1. **app/** - 메인 애플리케이션 폴더
```
app/
├── main.py              # 🚀 애플리케이션 시작점
├── config.py            # ⚙️ 설정 관리
├── database.py          # 🗄️ 데이터베이스 연결
├── dependencies.py      # 🔧 의존성 주입
├── models/              # 📊 데이터베이스 모델
├── schemas/             # 📋 API 요청/응답 스키마
├── api/                 # 🌐 API 라우터
├── core/                # 🔐 핵심 기능 (보안 등)
├── services/            # 💼 비즈니스 로직
└── utils/               # 🛠️ 유틸리티 함수
```

### 2. **각 폴더의 역할**

#### **models/** - 데이터베이스 테이블 정의
- `user.py`: 사용자 정보 테이블
- `meal_log.py`: 식사 기록 테이블
- `challenge.py`: 챌린지 정보 테이블
- `badge.py`: 배지 정보 테이블

#### **schemas/** - API 데이터 검증
- 프론트엔드와 주고받는 데이터의 형태 정의
- Pydantic을 사용한 자동 검증

#### **api/** - API 엔드포인트
- `auth.py`: 로그인/로그아웃
- `users.py`: 사용자 관리
- `logs.py`: 식사 기록
- `challenges.py`: 챌린지 관리

#### **services/** - 비즈니스 로직
- 데이터베이스 조작
- 외부 API 연동
- 복잡한 계산 로직

## 🔄 데이터 흐름

### 1. **사용자 요청 처리 과정**
```
1. 프론트엔드 → API 요청
2. FastAPI → 라우터 확인
3. 의존성 주입 (인증 등)
4. 서비스 로직 실행
5. 데이터베이스 조작
6. 응답 반환
```

### 2. **인증 과정**
```
1. 사용자 로그인
2. JWT 토큰 생성
3. 토큰을 쿠키에 저장
4. 이후 요청마다 토큰 검증
```

## 🛠️ 사용할 주요 기술

### **FastAPI**
- 빠른 개발 속도
- 자동 API 문서 생성
- 타입 힌트 기반 검증

### **SQLAlchemy**
- Python ORM (객체 관계 매핑)
- 데이터베이스 조작을 Python 코드로
- 마이그레이션 관리

### **Pydantic**
- 데이터 검증
- API 스키마 정의
- 자동 타입 변환

### **Alembic**
- 데이터베이스 마이그레이션
- 스키마 버전 관리
- 롤백 기능

## 🎯 오늘 진행할 단계

### **Step 1: 기본 프로젝트 설정**
1. 백엔드 폴더 생성
2. 가상환경 설정
3. 기본 파일들 생성

### **Step 2: 데이터베이스 연결**
1. PostgreSQL 설정
2. SQLAlchemy 연결
3. 기본 모델 생성

### **Step 3: 첫 번째 API 만들기**
1. 간단한 헬스체크 API
2. 기본 라우터 설정
3. 서버 실행 테스트

이렇게 하나씩 진행하면서 각 단계를 자세히 설명해드리겠습니다! 